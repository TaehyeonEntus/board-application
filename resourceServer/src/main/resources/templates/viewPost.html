<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <title th:text="${post.title}">게시글 상세</title>
    <style>
        body {
            max-width: 800px;
            margin: 20px auto;
            font-family: Arial, sans-serif;
        }
        h1 {
            margin-bottom: 10px;
        }
        .meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
        }
        .content {
            white-space: pre-wrap;
            font-size: 1.1em;
            line-height: 1.5em;
            margin-bottom: 30px;
        }
        .stats {
            margin-bottom: 20px;
        }
        .comments {
            margin-top: 40px;
        }
        .comment {
            border-top: 1px solid #ddd;
            padding: 10px 0;
        }
        .comment:first-child {
            border-top: none;
        }
        .comment-author {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .comment-content {
            white-space: pre-wrap;
        }
        a.author-link {
            text-decoration: none;
            color: #007bff;
        }
    </style>
</head>
<body>

<h1 th:text="${post.title}">게시글 제목</h1>

<div class="meta">
    작성자: <span th:text="${post.authorName}">작성자 이름</span>
</div>


<div class="stats">
    조회수: <span th:text="${post.viewCount}">0</span> |
    좋아요: <span th:text="${post.likeCount}">0</span>
</div>

<div class="content" th:text="${post.content}">
    게시글 내용
</div>

<hr />

<div class="comments">
    <h2>댓글 (<span th:text="${#lists.size(post.comments)}">0</span>)</h2>

    <div th:if="${#lists.isEmpty(post.comments)}">
        <p>댓글이 없습니다.</p>
    </div>

    <div th:each="comment : ${post.comments}" class="comment">
        <div class="comment-author" th:text="${comment.authorName}">댓글 작성자</div>
        <div class="comment-content" th:text="${comment.content}">댓글 내용</div>
    </div>
</div>

<script type="module">
    import { loadProtectedData } from "/static/js/apiRequest.js";

    window.addEventListener("DOMContentLoaded", () => {
        const postId = /*[[${post.postId}]]*/ '0';
        loadProtectedData(`/board/${postId}`, "result");
    });
</script>